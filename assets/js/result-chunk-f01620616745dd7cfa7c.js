(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2pvB":function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return r}));var a=s("8VmE"),i=s.n(a),n=s("lOrp"),o=/iPad|iPhone|iPod/.test(navigator.userAgent),c={name:"Finished",data:function(){return{updating:!1,loaded:{static:!1,result:!1},touchesLength:0,touchesTimer:null}},computed:i()({},Object(n.c)(["loading"]),Object(n.c)("images",{FB:"result/FB",ig:"result/ig",line:"result/line",button:"result/button4",text:"result/text6"}),Object(n.c)("share",["shareimg","resultimg","shareurl"]),Object(n.c)("game",["selected"]),{isIOS:function(){return o}}),watch:{resultimg:function(){this.drawCanvas()}},created:function(){this.loadStorage(),this.setLoading("感謝狀產生中")},mounted:function(){var t=this;this.setLoading("感謝狀產生中"),this.loadImamges("result").then((function(){t.drawCanvas(),t.checkLoading("static")}))},methods:i()({},Object(n.b)(["setLoading"]),Object(n.b)("images",{loadImamges:"load"}),Object(n.b)("share",{callAPI:"callAPI",callShare:"share"}),Object(n.b)("storage",{loadStorage:"loadStorage"}),Object(n.b)("analytics",["callGaButton"]),{resultLoaded:function(){var t=this,e=this.$refs.resultimg,s=setInterval((function(){e.naturalWidth>0&&e.naturalHeight>0&&(clearInterval(s),t.checkLoading("result"))}),20)},checkLoading:function(t){this.loaded[t]=!0,this.loaded.static&&this.loaded.result&&(this.setLoading(!1),0!==document.querySelector("html").scrollTop&&(document.querySelector("html").scrollTop=0))},onDownload:function(){this.callGaButton("btn_download")},drawCanvas:function(){var t=this.$refs.canvas;if(t&&this.resultimg){var e=new Image;e.onload=function(){var s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.drawImage(e,0,0)},e.src=this.resultimg}},onTouchstart:function(t){var e=this;0===this.touchesLength&&1===t.touches.length?this.touchesTimer=setTimeout((function(){1===e.touchesLength&&e.callGaButton("btn_download")}),500):this.touchesTimer&&(clearTimeout(this.touchesTimer),this.touchesTimer=null),this.touchesLength=t.touches.length},onTouchend:function(t){this.touchesTimer&&(clearTimeout(this.touchesTimer),this.touchesTimer=null),this.touchesLength=t.touches.length},shareFB:function(){this.callGaButton("btn_sharefb");var t=window.localStorage.shareText,e=JSON.parse(t);this.callShare({to:"fb",text:e.name+"你啵~棒！",href:this.shareurl,redirect:window.location.href})},shareLine:function(){this.callGaButton("btn_shareline");var t=window.localStorage.shareText,e=JSON.parse(t);this.callShare({to:"line",text:"謝謝"+e.name+"總是"+e.text+"，台灣最美風景就是你！",href:this.shareurl})},shareIG:function(){this.callGaButton("btn_ig"),window.location="instagram://",window.location="https://www.instagram.com/"},onClick:function(){this.callGaButton("btn_lineoa")}})},l=(s("BmqM"),s("psIG")),r=Object(l.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-100 style-page d-flex flex-column align-items-center"},[s("div",{staticClass:"flex-blocker-2 my-4"}),s("img",t._g({directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],ref:"resultimg",staticClass:"resultimg mt-4 mb-4",attrs:{src:t.resultimg},on:{load:t.resultLoaded}},{touchstart:t.onTouchstart,touchend:t.onTouchend})),s("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas"}),s("div",{staticClass:"flex-blocker-2 mt-4"}),t.loading?t._e():s("div",{staticClass:"button-group d-flex flex-column align-items-center w-100 pt-2 pb-3 px-4"},[s("div",{staticClass:"button-group-row d-flex align-items-center w-100 justify-content-center"},[s("p",[t._v("分享至")]),s("img",{staticClass:"icon ml-1",attrs:{src:t.FB.src},on:{click:t.shareFB}}),s("img",{staticClass:"icon ml-1",attrs:{src:t.line.src},on:{click:t.shareLine}}),t.isIOS?[s("p",{staticClass:"ml-1"},[t._v("或長按圖片下載，上傳")])]:[t._v("也可以"),s("a",{attrs:{download:((t.resultimg||"").match(/w+.(png|jpg)/)||[])[0]||"download.jpg",href:t.resultimg},on:{click:t.onDownload}},[t._v("下載圖片")]),t._v("，上傳")],s("img",{staticClass:"icon ml-1",attrs:{src:t.ig.src},on:{click:t.shareIG}})],2),s("div",{staticClass:"button-group-row w-100 d-flex align-items-center flex-column mt-4 mb-3"},[s("img",{staticClass:"text ml-1",attrs:{src:t.text.src}})]),s("a",{staticClass:"button-group-row w-100 d-flex align-items-center flex-column",attrs:{href:"https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=1654090632&scope=openid%20profile&bot_prompt=normal&redirect_uri=https%3A%2F%2Fcoca-cola.coolbe.com.tw%2Findex.php%2FPlay%2FlocalLogin&state=UdjUdYBPWP5eaUtkt2aEZCztxc9b_YTcsITfTtR-s1qybAio5F0qq0Gcs-m3VepInBHtLrgL3VCi4LUd6TLaAL4kr7Ne62D8ojVtyiU3dq8",target:"_blank"}},[s("img",{staticClass:"get-button ml-1",attrs:{src:t.button.src},on:{click:t.onClick}})])])])}),[],!1,null,null,null).exports},"7HWU":function(t,e,s){},BmqM:function(t,e,s){"use strict";var a=s("7HWU");s.n(a).a}}]);